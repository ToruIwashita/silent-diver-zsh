local precmd_func dest cmd
local -a args
local -aU reply
args=("${(z)BUFFER}")

dest=$args[$#args]
dest=${dest//\\/}

# cd .を回避する
if (( ! $#dest )); then
  zle -I
  zle kill-whole-line
  return
fi

[[ ! -d $dest ]] && dest=$dest:h

if [[ $options[autocd] != on ]]; then
  BUFFER="cd $dest"
else
  BUFFER=$dest
fi

zle accept-line

# [[ $autocd_option != on ]] && setopt noautocd

# vim: ft=zsh
